---
title: "Observability"
sidebarTitle: "VAPI Observability"
icon: "chart-network"
iconType: "regular"
description: "Monitor and analyze your VAPI-based voice agents"
---

## Overview

Learn how to monitor, analyze, and optimize your VAPI-based voice agents using Cekura's observability tools. This guide will walk you through setting up and configuring your VAPI integration.

<Tabs>
  <Tab title="Auto-fetch">
    Auto-fetch is the simplest way to get VAPI calls into Cekura. When enabled, Cekura pulls your call data from VAPI every 30 secondsâ€”no webhook configuration required.

    <Steps>
      <Step title="Create or select an agent">
        In your Cekura dashboard, create a new agent or select an existing one with VAPI as the voice provider.
      </Step>
      <Step title="Add VAPI credentials">
        In the Agent Settings page:
        1. Select **VAPI** as the voice integration provider
        2. Add your VAPI API key
        3. Enter your VAPI Assistant ID
      </Step>
      <Step title="Enable auto-fetch">
        Toggle on **Auto-fetch Production Calls** in the voice integration settings.
      </Step>
      <Step title="Test your integration">
        Make a test call from VAPI. Within 30 seconds, your call should appear in the Cekura observability `Calls` section.
      </Step>
    </Steps>

    <Tip>
    Auto-fetch is ideal for getting started quickly or when you can't configure webhooks. For real-time call data, use the webhook-based setup in the other tabs.
    </Tip>

  </Tab>
  <Tab title="No-code VAPI Integration">
    Follow these steps to connect your VAPI agent with Cekura's observability suite:

    <Steps>
      <Step title="Get your Cekura API Key">
        Navigate to the [API keys](https://dashboard.cekura.ai/dashboard/settings/org/api-key) section in your Cekura dashboard settings. If you don't have an API key yet, create a new one. Copy the API key value as you'll need it to authenticate your requests to Cekura's observability API.

        ![Cekura API Key Configuration](/images/Cekura_credentials.png)
      </Step>
      <Step title="Add Cekura credentials to VAPI">
        In your VAPI dashboard, navigate to [integrations](https://dashboard.vapi.ai/settings/integrations/custom-credential) in your account settings and add custom integration with the following details:
        - Auth type: Bearer token
        - Credential name: Cekura API key
        - Token: Your Cekura API key
        - Header name: X-CEKURA-API-KEY
        - Include bearer prefix: No

        ![VAPI Cekura Credentials Configuration](/images/Vapi_custom_credentials.png)
      </Step>
      <Step title="Configure Server URL in VAPI">
        In your VAPI dashboard, navigate to your agent settings and configure the Server URL and authorization header you created in the previous step. This URL is used for all communication between your application and VAPI, including context retrieval, function calls, and end-of-call reporting.

        Set the Server URL to:

        ```
        https://api.cekura.ai/observability/v1/vapi/observe/?agent_id=YOUR_AGENT_ID
        ```

        ![VAPI Server URL Configuration](/images/Vapi_observability.png)
      </Step>
      <Step title="Get your Assistant ID">
        Each VAPI agent has a unique Assistant ID that identifies your specific implementation. Copy your Assistant ID from the VAPI dashboard:

        ![VAPI Assistant ID](/images/vapi-assistant-id.png)
      </Step>
      <Step title="Add credentials to Cekura">
        In your Cekura Agent Settings page:

        1. Add the API key from VAPI with the tag `webhook`
        2. Copy and add your `agent ID` from VAPI

        ![Navigate to API Keys](/images/vapi_agentsettings.png)
      </Step>
      <Step title="Test your integration">
        Make a test call from VAPI (phone number based or webcall). Your calls should now appear in the Cekura observability `Calls` section.
      </Step>
    </Steps>

  </Tab>
  <Tab title="Forwarding VAPI respone">
    If you already have an existing webhook setup and want to forward the VAPI response to Cekura's observability suite:

    <Steps>
      <Step title="Configure forwarding endpoint">
        Set up a forwarding mechanism to send the VAPI webhook response to Cekura's observability endpoint:

        ```
        POST https://api.cekura.ai/observability/v1/observe/
        ```
      </Step>
      <Step title="Add authentication headers">
        Include your Cekura API key in the request headers:

        ```
        X-CEKURA-API-KEY: <your_cekura_api_key>
        Content-Type: application/json
        ```
      </Step>
      <Step title="Forward the request body">
        Forward the VAPI webhook response to Cekura with the following request body structure:

        ```json
        {
          "agent": <agent_id_in_cekura>,
          "voice_recording_url": vapi_response["stereoRecordingUrl"],
          "transcript_type": "vapi",
          "transcript_json": vapi_response["messages"],
          "call_id": vapi_response["id"],
          "call_ended_reason": vapi_response["endedReason"]
        }
        ```
      </Step>
    </Steps>

  </Tab>
</Tabs>
