---
title: 'IVR and Voicemail'
sidebarTitle: "IVR & Voicemail"
icon: "phone-volume"
iconType: "regular"
description: "Configure Interactive Voice Response (IVR) and voicemail scenarios using conditional actions and XML tags"
---

## Overview

Learn how to create IVR (Interactive Voice Response) and voicemail scenarios in Cekura using conditional actions. These powerful features allow you to build menu-driven phone systems and voicemail receivers that respond to DTMF tones.

## IVR (Interactive Voice Response)

### What is IVR?

IVR systems provide menu-based navigation for phone calls, allowing callers to interact using keypad inputs (DTMF tones). With Cekura, you can create complex IVR flows using conditional scenarios and XML tags.

### How It Works

1. The IVR system waits for DTMF tones from the caller
2. Based on the received tone and current menu context, the system responds with the appropriate action
3. Actions can include playing menu prompts or transitioning to natural conversation

### IVR Configuration Structure

IVR scenarios are configured using a JSON structure with conditions and actions:

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `conditions` | array | Yes | Array of condition objects defining the IVR flow |
| `role` | string | Yes | System role defining the agent's behavior |

#### Condition Object Structure

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `id` | number | Yes | Unique identifier for the condition |
| `condition` | string | Yes | Description of when this condition applies (e.g., "FIRST_MESSAGE", specific DTMF tones) |
| `action` | string | Yes | Action to take (XML tag for IVR prompt or natural response instruction) |
| `type` | string | Yes | Type of condition (typically "standard") |
| `fixed_message` | boolean | Yes | Whether the message is fixed (true for IVR prompts, false for natural responses) |

### IVR XML Tags

Use the `<ivr>` XML tag to define menu prompts:

```xml
<ivr text="Your menu text here. Press 1 for Option A, Press 2 for Option B." />
```

### Example: Hospital IVR System

[Screenshot placeholder - User will add]

```json
{
  "conditions": [
    {
      "id": 0,
      "condition": "FIRST_MESSAGE",
      "action": "<ivr text=\"Hi, Welcome to Madam Hospitals. Press 1 for Hospital Information, Press 2 for Doctor Information, or Press 9 for Emergency Services.\" />",
      "type": "standard",
      "fixed_message": true
    },
    {
      "id": 1,
      "condition": "The main agent send DTMF tone of 1, after testing agent intro message, i.e, \"Hi, Welcome to Madam Hospitals. Press 1 for Hospital Information, Press 2 for Doctor Information, or Press 9 for Emergency Services.\"",
      "action": "<ivr text=\"Madam Hospital operates 24 by 7 with modern facilities. Press 1 for Visiting Hours, Press 2 for Departments, or Press 3 to Talk to Support.\" />",
      "type": "standard",
      "fixed_message": true
    },
    {
      "id": 2,
      "condition": "The main agent send DTMF tone of 2, after testing agent intro message, i.e, \"Hi, Welcome to Madam Hospitals. Press 1 for Hospital Information, Press 2 for Doctor Information, or Press 9 for Emergency Services.\"",
      "action": "<ivr text=\"Our hospital has highly experienced doctors. Press 1 for Doctor Timings, Press 2 for Specialties, or Press 3 to Talk to Support.\" />",
      "type": "standard",
      "fixed_message": true
    },
    {
      "id": 3,
      "condition": "The main agent send DTMF tone of 9, after testing agent intro message, i.e, \"Hi, Welcome to Madam Hospitals. Press 1 for Hospital Information, Press 2 for Doctor Information, or Press 9 for Emergency Services.\"",
      "action": "<ivr text=\"You have reached Emergency Services. Press 1 to connect to Emergency Desk immediately or Press 2 to return to the main menu.\" />",
      "type": "standard",
      "fixed_message": true
    },
    {
      "id": 4,
      "condition": "The main agent send DTMF tone of 1, after testing agent message, i.e, \"Madam Hospital operates 24 by 7 with modern facilities. Press 1 for Visiting Hours, Press 2 for Departments, or Press 3 to Talk to Support.\"",
      "action": "<ivr text=\"Visiting hours are from 10 AM to 8 PM daily. Press 1 to repeat, or Press 9 to return to the main menu.\" />",
      "type": "standard",
      "fixed_message": true
    },
    {
      "id": 5,
      "condition": "The main agent send DTMF tone of 2, after testing agent message, i.e, \"Madam Hospital operates 24 by 7 with modern facilities. Press 1 for Visiting Hours, Press 2 for Departments, or Press 3 to Talk to Support.\"",
      "action": "<ivr text=\"We have Cardiology, Neurology, Orthopedics, and Pediatrics departments. Press 1 for Cardiology, Press 2 for Neurology, or Press 3 to Talk to Support.\" />",
      "type": "standard",
      "fixed_message": true
    },
    {
      "id": 6,
      "condition": "The main agent send DTMF tone of 3, after testing agent message, i.e, \"Madam Hospital operates 24 by 7 with modern facilities. Press 1 for Visiting Hours, Press 2 for Departments, or Press 3 to Talk to Support.\"",
      "action": "Respond naturally now acting as an hospital ai assistant.",
      "type": "standard",
      "fixed_message": false
    },
    {
      "id": 7,
      "condition": "The main agent send DTMF tone of 1, after testing agent message, i.e, \"Our hospital has highly experienced doctors. Press 1 for Doctor Timings, Press 2 for Specialties, or Press 3 to Talk to Support.\"",
      "action": "<ivr text=\"Doctors are available from 9 AM to 6 PM Monday to Saturday. Press 1 to repeat, or Press 9 to return to the main menu.\" />",
      "type": "standard",
      "fixed_message": true
    },
    {
      "id": 8,
      "condition": "The main agent send DTMF tone of 2, after testing agent message, i.e, \"Our hospital has highly experienced doctors. Press 1 for Doctor Timings, Press 2 for Specialties, or Press 3 to Talk to Support.\"",
      "action": "<ivr text=\"Our specialties include Heart Care, Brain Care, Joint Replacement, and Child Care. Press 1 to talk to Support or Press 9 to return to the main menu.\" />",
      "type": "standard",
      "fixed_message": true
    },
    {
      "id": 9,
      "condition": "The main agent send DTMF tone of 3, after testing agent message, i.e, \"Our hospital has highly experienced doctors. Press 1 for Doctor Timings, Press 2 for Specialties, or Press 3 to Talk to Support.\"",
      "action": "Respond naturally now acting as an hospital ai assistant.",
      "type": "standard",
      "fixed_message": false
    },
    {
      "id": 10,
      "condition": "The main agent send DTMF tone of 1, after testing agent message, i.e, \"You have reached Emergency Services. Press 1 to connect to Emergency Desk immediately or Press 2 to return to the main menu.\"",
      "action": "Respond naturally now acting as an hospital ai assistant.",
      "type": "standard",
      "fixed_message": false
    },
    {
      "id": 11,
      "condition": "The main agent send DTMF tone of 2, after testing agent message, i.e, \"You have reached Emergency Services. Press 1 to connect to Emergency Desk immediately or Press 2 to return to the main menu.\"",
      "action": "<ivr text=\"Hi, Welcome to Madam Hospitals. Press 1 for Hospital Information, Press 2 for Doctor Information, or Press 9 for Emergency Services.\" />",
      "type": "standard",
      "fixed_message": true
    }
  ],
  "role": "You are an hospital IVR system. You strictly wait for DTMF tones and follow menu-based navigation. You do not engage in free-form conversation unless explicitly instructed."
}
```

### Key IVR Features

- **Menu-Based Navigation**: Guide callers through structured menus
- **DTMF Detection**: Respond to keypad inputs (0-9, *, #)
- **Context-Aware Routing**: Different actions based on previous menu selections
- **Hybrid Mode**: Mix IVR menus with natural conversation (set `fixed_message: false`)

## Voicemail

### What is Voicemail?

Voicemail systems allow callers to leave messages when the recipient is unavailable. With Cekura, you can create intelligent voicemail receivers that guide callers through the message recording process.

### How It Works

1. The voicemail system greets the caller
2. Prompts the caller to record their message
3. Waits for a DTMF signal (e.g., pressing 0) to mark the end of the message
4. Ends the call after message completion

### Voicemail Configuration Structure

Voicemail scenarios use the same JSON structure as IVR:

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `conditions` | array | Yes | Array of condition objects defining the voicemail flow |
| `role` | string | Yes | System role defining the agent's behavior |

### Voicemail XML Tags

Use the `<voicemail>` XML tag to define voicemail prompts:

```xml
<voicemail text="Your voicemail greeting here. Please leave a message after the tone." />
```

Use the `<endcall />` tag to terminate the call:

```xml
<endcall />
```

### Example: Personal Voicemail System

[Screenshot placeholder - User will add]

```json
{
  "conditions": [
    {
      "id": 1,
      "condition": "The main agent starts the conversation and only says \"Hello\".",
      "action": "<voicemail text=\"Hello, Adarsh is not available right now please record your message after this message and please press 0 button after you have finished speaking the message to mark the end of message.\" />",
      "type": "standard",
      "fixed_message": true
    },
    {
      "id": 2,
      "condition": "Main Agent sent DTMF: 0",
      "action": "<endcall />",
      "type": "standard",
      "fixed_message": true
    }
  ],
  "role": "You are a bot acting as a voicemail receiver."
}
```

### Key Voicemail Features

- **Personalized Greetings**: Custom messages for different recipients
- **Message Recording**: Capture caller messages
- **Completion Signals**: Use DTMF tones to indicate message completion
- **Automatic Call Termination**: End call after message is recorded

## Best Practices

### IVR Systems

- Keep menu options concise (3-4 options per menu level)
- Provide clear instructions for navigation
- Always include an option to return to the main menu
- Offer an escape to natural conversation when needed
- Use consistent DTMF patterns (e.g., 9 for main menu, 0 for operator)

### Voicemail Systems

- Start with a clear greeting identifying the recipient
- Provide explicit instructions for leaving a message
- Specify how to end the message (e.g., "Press 0 when finished")
- Keep the greeting brief and professional
- Consider adding options for urgent messages

## Common Use Cases

### IVR Use Cases

- Customer support routing
- Hospital/healthcare information systems
- Appointment scheduling
- Order status inquiries
- Department directory navigation

### Voicemail Use Cases

- Personal voicemail boxes
- After-hours message collection
- Event registration confirmations
- Customer callback requests
- Survey response collection

## Next Steps

After configuring your IVR or voicemail scenario:
1. Test thoroughly with different DTMF sequences
2. Monitor call transcripts for user behavior patterns
3. Refine menu structures based on usage data
4. Update prompts for clarity and efficiency
